
{% render 'collection-filter', collection: collection %}

<section class="collection">

  {% render 'breadcrumbs', class: 'collection__breadcrumbs' %}

  <h1 class="collection__title">{{collection.title}}</h1>
  <p class="collection__description">{{collection.description}}</p>
  
  <div class="collection__controls">
    <div class="collection__filter filter">filter</div>
    {% render 'collection-sort' %}
  </div>
  
  <p class="collection__product-total"></p>

  <div class="collection__products">
    {% render 'filtered-products' %}
  </div>

  {% comment %} {% paginate collection.products by 12 %}
    <div class="collection__products">
    {% for product in collection.products %}
      {% render 'product-card', product: product, collection: collection, class: 'collection__product' %}
    {% endfor %}
    </div>
    
    {% if paginate.pages > 1 %}
      {% render 'pagination', paginate: paginate, pages: paginate.pages %}
    {% endif %}

  {% endpaginate %} {% endcomment %}

</section>


<script>
  {% comment %}
    Populate product count total after products have loaded
  {% endcomment %}
  document.addEventListener('DOMContentLoaded', () => {
    const productTotal = document.querySelector('.collection__product-total');
    const count = document.querySelectorAll('.product-card').length;
    productTotal.innerText = `${count} products`;
  });
</script>